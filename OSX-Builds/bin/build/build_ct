#!/bin/bash

curDir=$(dirname $0)
scriptName=$(basename $0)
cmakeOptions=${scriptName}_cmake_options
[ ! -e ${curDir}/${CODENAME}/${cmakeOptions} ] && exit 1
. ${curDir}/${CODENAME}/${cmakeOptions} 
. ${curDir}/build_common
. ${curDir}/build_common_${PKG_TYPE}

BUILD_SCRIPT=../build.sh
cat > $BUILD_SCRIPT <<SCRIPTFILE
#!/bin/sh

cmake ../HPCC-Platform -DCHECK_GIT_TAG=0 -DCLIENTTOOLS_ONLY=ON -DUSE_PYTHON=OFF -DUSE_V8=OFF -DUSE_JNI=OFF -DUSE_RINSIDE=OFF -DUSE_MYSQL=OFF -DUSE_SQLITE3=OFF ${CMAKE_OPTIONS} -DUSE_CASSANDRA=OFF -DUSE_MEMCACHED=OFF -DUSE_REDIS=OFF || exit 1

make -j4 package

SCRIPTFILE

echo "cmake ../HPCC-Platform -DCHECK_GIT_TAG=0 -DCLIENTTOOLS_ONLY=ON -DUSE_PYTHON=OFF -DUSE_V8=OFF -DUSE_JNI=OFF -DUSE_RINSIDE=OFF -DUSE_MYSQL=OFF -DUSE_SQLITE3=OFF ${CMAKE_OPTIONS} -DUSE_CASSANDRA=OFF -DUSE_MEMCACHED=OFF -DUSE_REDIS=OFF"
cmake ../HPCC-Platform -DCHECK_GIT_TAG=0 -DCLIENTTOOLS_ONLY=ON -DUSE_PYTHON=OFF -DUSE_V8=OFF -DUSE_JNI=OFF -DUSE_RINSIDE=OFF -DUSE_MYSQL=OFF -DUSE_SQLITE3=OFF ${CMAKE_OPTIONS} -DUSE_CASSANDRA=OFF -DUSE_MEMCACHED=OFF -DUSE_REDIS=OFF || exit 1

build_package || exit 1

copy_package
